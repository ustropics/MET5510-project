%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FILE DESCRIPTION %%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% FILENAME: cmap_PRGn.m
%
% DESCRIPTION: Diverging purple-green colormap based on Matplotlib's PRGn.
%              Ideal for signed data (e.g., anomalies, fluxes).
%              Interpolates between 10 sampled colors.
%
% INPUT:
%   n - Number of colors (default: 256)
%
% OUTPUT:
%   cmap - n x 3 RGB matrix (0–1 range)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% FUNCTION %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

function cmap = cmap_PRGn(n)
    
    %% --------------------------------------------------------------------
    %% 1. Set default input
    %% --------------------------------------------------------------------
    if nargin < 1, n = 256; end

    %% --------------------------------------------------------------------
    %% 2. Define node colors (RGB, 0–1) from Matplotlib PRGn
    %% --------------------------------------------------------------------
    % Hex: #40004b, #793187, #a17ab2, #ceb5d7, #eee3ee,
    %      #e6f3e3, #b7e2b1, #69b76d, #217d3b, #00441b
    nodes = [
        0.25098  0.00000  0.29412;
        0.47620  0.19162  0.52910;
        0.63153  0.47997  0.69827;
        0.80915  0.70850  0.84444;
        0.93295  0.89058  0.93518;
        0.90173  0.95302  0.88835;
        0.71765  0.88627  0.69412;
        0.41138  0.71696  0.42884;
        0.13010  0.49135  0.23183;
        0.00000  0.26667  0.10588
    ];

    %% --------------------------------------------------------------------
    %% 3. Interpolate to n colors
    %% --------------------------------------------------------------------
    pos = linspace(0, 1, size(nodes,1));
    cmap = interp1(pos, nodes, linspace(0, 1, n), 'pchip');
end